<!-- List of available courses, with ability to view individual courses, sign up/drop or create/delete/edit if a teacher. This could be separated into two pages if that works better-->

<!DOCTYPE html>
<html lang="en">

<%- include('./partials/head.ejs') %>>

<body class="d-flex flex-column min-vh-100">
    <!-- Navbar -->
    <%- include('./partials/nav.ejs') %>

    <!-- Main Content -->
    <div class="container text-center mt-4 flex-grow-1">
        <div class="container text-center mt-4 flex-grow-1">
            <h1>Available Courses</h1>
            <% if (courses.length) { %>
                <div class="accordion" id="accordionExample">
                    <% courses.forEach((course, index) => { %>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapse<%= index %>" aria-expanded="false" aria-controls="collapse<%= index %>">
                                    <%= course.name %>
                                </button>
                            </h2>
                            <div id="collapse<%= index %>" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    Subject Area: <%= course.subject %><br>
                                    ID: <%= course._id %><br>
                                    Credits: <%= course.credits %><br>
                                    Description: <%= course.description %>
                                </div>
                                <!-- Update and Delete buttons in each course accordion item -->
                                <button class="btn btn-warning w-20">
                                    <a href="/courses/<%= course._id %>/edit" class="text-decoration-none text-white">Update</a>
                                </button>
                                <form action="/courses/<%= course._id %>/delete" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger w-20">Delete</button>
                                </form>
                            </div>
                        </div>
                    <% }) %>
                </div>
            <% } else { %>
                <p>No courses available at the moment.</p>
            <% } %>
        </div>

    </div>

    <!-- Footer -->
    <%- include('./partials/footer.ejs') %>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>